{"version":3,"sources":["../../js/logic.js"],"names":["Detector","webgl","addGetWebGLMessage","OriginalImg","SegmentImg","mouse","THREE","Vector2","raycaster","Raycaster","mousePressed","clickCount","allText","init","animate","readTextFile","filename","idDiv","InitCanvas","console","log","originalCanvas","document","getElementById","addEventListener","onDocumentMouseDown","onDocumentMouseUp","event","x","clientX","renderer","domElement","offsetLeft","clientWidth","y","clientY","offsetTop","clientHeight","setFromCamera","clone","camera","objects","intersectObjects","scene","children","requestAnimationFrame","file","rawFile","XMLHttpRequest","open","onreadystatechange","readyState","status","responseText","lineArr","intoArray","firstLineWords","intoWords","secondLineWords","atlas","i","length","send","lines","split","line","wordsArr"],"mappings":"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","file":"logic.js","sourcesContent":["if (!Detector.webgl) Detector.addGetWebGLMessage();\r\n\r\n// global variables for this scripts\r\nlet OriginalImg,\r\n    SegmentImg;\r\n\r\nvar mouse = new THREE.Vector2();\r\nvar raycaster = new THREE.Raycaster();\r\nvar mousePressed = false;\r\nvar clickCount = 0;\r\nvar allText;\r\n\r\n\r\ninit();\r\nanimate();\r\nreadTextFile(\"columna01-es-latin1.txt\");\r\n\r\n\r\n// initilize the page\r\nfunction init() {\r\n\r\n\r\n    let filename = \"models/nrrd/columna01.nrrd\"; // change your nrrd file\r\n    let idDiv = 'original';\r\n    OriginalImg = new InitCanvas(idDiv, filename);\r\n    OriginalImg.init();\r\n    console.log(OriginalImg);\r\n\r\n    filename = \"models/nrrd/columnasegmentado01.nrrd\"; // change your nrrd file\r\n    idDiv = 'segment';\r\n    SegmentImg = new InitCanvas(idDiv, filename);\r\n    SegmentImg.init();\r\n}\r\n\r\nlet originalCanvas = document.getElementById('original');\r\noriginalCanvas.addEventListener('mousedown', onDocumentMouseDown, false);\r\noriginalCanvas.addEventListener('mouseup', onDocumentMouseUp, false);\r\n\r\n\r\nfunction onDocumentMouseDown(event) {\r\n    mousePressed = true;\r\n\r\n    clickCount++;\r\n\r\n    mouse.x = ( ( event.clientX - OriginalImg.renderer.domElement.offsetLeft ) / OriginalImg.renderer.domElement.clientWidth ) * 2 - 1;\r\n    mouse.y = -( ( event.clientY - OriginalImg.renderer.domElement.offsetTop ) / OriginalImg.renderer.domElement.clientHeight ) * 2 + 1\r\n\r\n    console.log('Mouse x position is: ', mouse.x, 'the click number was: ', clickCount);\r\n    console.log('Mouse Y position is: ', mouse.y);\r\n\r\n    raycaster.setFromCamera(mouse.clone(), OriginalImg.camera);\r\n    var objects = raycaster.intersectObjects(OriginalImg.scene.children);\r\n\r\n    console.log(objects);\r\n}\r\n\r\nfunction onDocumentMouseUp(event) {\r\n    mousePressed = false\r\n}\r\n\r\n\r\nfunction animate() {\r\n\r\n\r\n    requestAnimationFrame(animate);\r\n    OriginalImg.animate();\r\n    SegmentImg.animate();\r\n\r\n\r\n}\r\n\r\nfunction readTextFile(file) {\r\n    var rawFile = new XMLHttpRequest();\r\n    rawFile.open(\"GET\", file, false);\r\n    rawFile.onreadystatechange = function () {\r\n        if (rawFile.readyState === 4) {\r\n            if (rawFile.status === 200 || rawFile.status == 0) {\r\n                allText = rawFile.responseText;\r\n                console.log('The complete text is', allText);\r\n                let lineArr = intoArray(allText);\r\n                let firstLineWords = intoWords(lineArr[0]);\r\n                let secondLineWords = intoWords(lineArr[1]);\r\n\r\n                console.log('Our  first line is: ', lineArr[0]);\r\n\r\n                let atlas = {};\r\n                for (let i = 0; i < firstLineWords.length; i++) {\r\n                    console.log(`Our ${i} word in the first line is : ${firstLineWords[i]}`);\r\n                    console.log(`Our ${i} word in the SECOND line is : ${secondLineWords[i]}`);\r\n                    atlas[firstLineWords[i]] = secondLineWords[i];\r\n                }\r\n                console.log('The atlas is: ',atlas);\r\n            }\r\n        }\r\n    }\r\n    rawFile.send(null);\r\n}\r\n\r\nfunction intoArray(lines) {\r\n    // splitting all text data into array \"\\n\" is splitting data from each new line\r\n    //and saving each new line as each element*\r\n\r\n    var lineArr = lines.split('\\n');\r\n\r\n    //just to check if it works output lineArr[index] as below\r\n\r\n\r\n    return lineArr;\r\n\r\n\r\n}\r\n\r\nfunction intoWords(line) {\r\n\r\n\r\n    var wordsArr = line.split('\" \"');\r\n\r\n\r\n    return wordsArr;\r\n}"]}