{"version":3,"sources":["../../js/logic.js"],"names":["Detector","webgl","addGetWebGLMessage","OriginalImg","SegmentImg","mouse","THREE","Vector2","raycaster","Raycaster","mousePressed","clickCount","init","animate","filename","idDiv","InitCanvas","console","log","originalCanvas","document","getElementById","addEventListener","onDocumentMouseDown","onDocumentMouseUp","event","x","clientX","renderer","domElement","offsetLeft","clientWidth","y","clientY","offsetTop","clientHeight","setFromCamera","clone","camera","objects","intersectObjects","scene","children","pointGeometry","Geometry","position","Vector3","point","z","vertices","push","pointMaterial","PointsMaterial","color","Points","add","requestAnimationFrame"],"mappings":";;AAAA,IAAI,CAACA,SAASC,KAAd,EAAqBD,SAASE,kBAAT;;AAErB;AACA,IAAIC,oBAAJ;AAAA,IACIC,mBADJ;;AAGA,IAAIC,QAAQ,IAAIC,MAAMC,OAAV,EAAZ;AACA,IAAIC,YAAY,IAAIF,MAAMG,SAAV,EAAhB;AACA,IAAIC,eAAe,KAAnB;AACA,IAAIC,aAAa,CAAjB;;AAGAC;AACAC;;AAGA;AACA,SAASD,IAAT,GAAgB;AACZ,QAAIE,WAAW,4BAAf,CADY,CACiC;AAC7C,QAAIC,QAAQ,UAAZ;AACAZ,kBAAc,IAAIa,UAAJ,CAAeD,KAAf,EAAsBD,QAAtB,CAAd;AACAX,gBAAYS,IAAZ;AACAK,YAAQC,GAAR,CAAYf,WAAZ;;AAEAW,eAAW,sCAAX,CAPY,CAOuC;AACnDC,YAAQ,SAAR;AACAX,iBAAa,IAAIY,UAAJ,CAAeD,KAAf,EAAsBD,QAAtB,CAAb;AACAV,eAAWQ,IAAX;AACH;;AAED,IAAIO,iBAAiBC,SAASC,cAAT,CAAwB,UAAxB,CAArB;AACAF,eAAeG,gBAAf,CAAgC,WAAhC,EAA6CC,mBAA7C,EAAkE,KAAlE;AACAJ,eAAeG,gBAAf,CAAgC,SAAhC,EAA2CE,iBAA3C,EAA8D,KAA9D;;AAGA,SAASD,mBAAT,CAA6BE,KAA7B,EAAoC;AAChCf,mBAAe,IAAf;;AAEAC;;AAEAN,UAAMqB,CAAN,GAAY,CAAED,MAAME,OAAN,GAAgBxB,YAAYyB,QAAZ,CAAqBC,UAArB,CAAgCC,UAAlD,IAAiE3B,YAAYyB,QAAZ,CAAqBC,UAArB,CAAgCE,WAAnG,GAAmH,CAAnH,GAAuH,CAAjI;AACA1B,UAAM2B,CAAN,GAAU,EAAG,CAAEP,MAAMQ,OAAN,GAAgB9B,YAAYyB,QAAZ,CAAqBC,UAArB,CAAgCK,SAAlD,IAAgE/B,YAAYyB,QAAZ,CAAqBC,UAArB,CAAgCM,YAAnG,IAAoH,CAApH,GAAwH,CAAlI;;AAEAlB,YAAQC,GAAR,CAAY,uBAAZ,EAAqCb,MAAMqB,CAA3C,EAA8C,wBAA9C,EAAwEf,UAAxE;AACAM,YAAQC,GAAR,CAAY,uBAAZ,EAAqCb,MAAM2B,CAA3C;;AAEAxB,cAAU4B,aAAV,CAAwB/B,MAAMgC,KAAN,EAAxB,EAAuClC,YAAYmC,MAAnD;AACA,QAAIC,UAAU/B,UAAUgC,gBAAV,CAA2BrC,YAAYsC,KAAZ,CAAkBC,QAA7C,CAAd;;AAEA,QAAIC,gBAAgB,IAAIrC,MAAMsC,QAAV,EAApB;;AAGA,QAAIC,WAAW,IAAIvC,MAAMwC,OAAV,EAAf;AACAD,aAASnB,CAAT,GAAaa,QAAQ,CAAR,EAAWQ,KAAX,CAAiBrB,CAA9B;AACAmB,aAASb,CAAT,GAAaO,QAAQ,CAAR,EAAWQ,KAAX,CAAiBf,CAA9B;AACAa,aAASG,CAAT,GAAaT,QAAQ,CAAR,EAAWQ,KAAX,CAAiBC,CAA9B;;AAEAL,kBAAcM,QAAd,CAAuBC,IAAvB,CAA4BL,QAA5B;;AAGA,QAAIM,gBAAgB,IAAI7C,MAAM8C,cAAV,CAAyB,EAACC,OAAO,QAAR,EAAzB,CAApB;;AAEA,QAAIN,QAAQ,IAAIzC,MAAMgD,MAAV,CAAiBX,aAAjB,EAAgCQ,aAAhC,CAAZ;;AAEAhD,gBAAYsC,KAAZ,CAAkBc,GAAlB,CAAsBR,KAAtB;;AAEA9B,YAAQC,GAAR,CAAYqB,OAAZ;AACH;;AAED,SAASf,iBAAT,CAA2BC,KAA3B,EAAkC;AAC9Bf,mBAAe,KAAf;AACH;;AAGD,SAASG,OAAT,GAAmB;;AAGf2C,0BAAsB3C,OAAtB;AACAV,gBAAYU,OAAZ;AACAT,eAAWS,OAAX;AAGH","file":"logic.js","sourcesContent":["if (!Detector.webgl) Detector.addGetWebGLMessage();\r\n\r\n// global variables for this scripts\r\nlet OriginalImg,\r\n    SegmentImg;\r\n\r\nvar mouse = new THREE.Vector2();\r\nvar raycaster = new THREE.Raycaster();\r\nvar mousePressed = false;\r\nvar clickCount = 0;\r\n\r\n\r\ninit();\r\nanimate();\r\n\r\n\r\n// initilize the page\r\nfunction init() {\r\n    let filename = \"models/nrrd/columna01.nrrd\"; // change your nrrd file\r\n    let idDiv = 'original';\r\n    OriginalImg = new InitCanvas(idDiv, filename);\r\n    OriginalImg.init();\r\n    console.log(OriginalImg);\r\n\r\n    filename = \"models/nrrd/columnasegmentado01.nrrd\"; // change your nrrd file\r\n    idDiv = 'segment';\r\n    SegmentImg = new InitCanvas(idDiv, filename);\r\n    SegmentImg.init();\r\n}\r\n\r\nlet originalCanvas = document.getElementById('original');\r\noriginalCanvas.addEventListener('mousedown', onDocumentMouseDown, false);\r\noriginalCanvas.addEventListener('mouseup', onDocumentMouseUp, false);\r\n\r\n\r\nfunction onDocumentMouseDown(event) {\r\n    mousePressed = true;\r\n\r\n    clickCount++;\r\n\r\n    mouse.x = ( ( event.clientX - OriginalImg.renderer.domElement.offsetLeft ) / OriginalImg.renderer.domElement.clientWidth ) * 2 - 1;\r\n    mouse.y = -( ( event.clientY - OriginalImg.renderer.domElement.offsetTop ) / OriginalImg.renderer.domElement.clientHeight ) * 2 + 1\r\n\r\n    console.log('Mouse x position is: ', mouse.x, 'the click number was: ', clickCount);\r\n    console.log('Mouse Y position is: ', mouse.y);\r\n\r\n    raycaster.setFromCamera(mouse.clone(), OriginalImg.camera);\r\n    var objects = raycaster.intersectObjects(OriginalImg.scene.children);\r\n\r\n    var pointGeometry = new THREE.Geometry();\r\n\r\n\r\n    var position = new THREE.Vector3();\r\n    position.x = objects[0].point.x;\r\n    position.y = objects[0].point.y;\r\n    position.z = objects[0].point.z;\r\n\r\n    pointGeometry.vertices.push(position);\r\n\r\n\r\n    var pointMaterial = new THREE.PointsMaterial({color: 0x888888});\r\n\r\n    var point = new THREE.Points(pointGeometry, pointMaterial);\r\n\r\n    OriginalImg.scene.add(point);\r\n\r\n    console.log(objects);\r\n}\r\n\r\nfunction onDocumentMouseUp(event) {\r\n    mousePressed = false\r\n}\r\n\r\n\r\nfunction animate() {\r\n\r\n\r\n    requestAnimationFrame(animate);\r\n    OriginalImg.animate();\r\n    SegmentImg.animate();\r\n\r\n\r\n}   "]}