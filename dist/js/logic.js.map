{"version":3,"sources":["../../js/logic.js"],"names":["Detector","webgl","addGetWebGLMessage","OriginalImg","SegmentImg","myFileReader","mouse","THREE","Vector2","raycaster","Raycaster","mousePressed","clickCount","allText","init","animate","readTextFile","initCanvasOfOriginalImg","initCanvasOfSegmentedImg","originalCanvas","document","getElementById","addEventListener","onDocumentMouseDown","onDocumentMouseUp","event","realClickedCanvasX","offsetX","realClickedCanvasY","offsetY","OriginalImgRenderer","renderer","x","clientX","domElement","offsetLeft","clientWidth","y","clientY","offsetTop","clientHeight","console","log","target","getRenderTarget","outputBuffer","Uint8Array","width","height","readRenderTargetPixels","pixelIndex","color","r","g","b","a","setFromCamera","clone","camera","objects","intersectObjects","scene","children","requestAnimationFrame"],"mappings":";;AAAA,IAAI,CAACA,SAASC,KAAd,EAAqBD,SAASE,kBAAT;;AAErB;AACA,IAAIC,oBAAJ;AAAA,IACIC,mBADJ;AAAA,IAEIC,qBAFJ;;AAIA,IAAIC,QAAQ,IAAIC,MAAMC,OAAV,EAAZ;AACA,IAAIC,YAAY,IAAIF,MAAMG,SAAV,EAAhB;AACA,IAAIC,eAAe,KAAnB;AACA,IAAIC,aAAa,CAAjB;AACA,IAAIC,OAAJ;;AAIAC;AACAC;;AAKA;AACA,SAASD,IAAT,GAAgB;;AAGZE,iBAAa,yBAAb;AACAC;AACAC;AAEH;;AAID,IAAIC,iBAAiBC,SAASC,cAAT,CAAwB,UAAxB,CAArB;AACAF,eAAeG,gBAAf,CAAgC,WAAhC,EAA6CC,mBAA7C,EAAkE,KAAlE;AACAJ,eAAeG,gBAAf,CAAgC,SAAhC,EAA2CE,iBAA3C,EAA8D,KAA9D;;AAGA,SAASD,mBAAT,CAA6BE,KAA7B,EAAoC;AAChCd,mBAAe,IAAf;;AAEAC;;AAEA,QAAIc,qBAAqBD,MAAME,OAA/B;AACA,QAAIC,qBAAqBH,MAAMI,OAA/B;;AAEA,QAAIC,sBAAsB3B,YAAY4B,QAAtC;AACAzB,UAAM0B,CAAN,GAAY,CAAEP,MAAMQ,OAAN,GAAgBH,oBAAoBI,UAApB,CAA+BC,UAAjD,IAAgEL,oBAAoBI,UAApB,CAA+BE,WAAjG,GAAiH,CAAjH,GAAqH,CAA/H;AACA9B,UAAM+B,CAAN,GAAU,EAAG,CAAEZ,MAAMa,OAAN,GAAgBR,oBAAoBI,UAApB,CAA+BK,SAAjD,IAA+DT,oBAAoBI,UAApB,CAA+BM,YAAjG,IAAkH,CAAlH,GAAsH,CAAhI;;AAGAC,YAAQC,GAAR,CAAY,uBAAZ,EAAqChB,kBAArC,EAAyD,wBAAzD,EAAmFd,UAAnF;AACA6B,YAAQC,GAAR,CAAY,uBAAZ,EAAqCd,kBAArC,EAAyD,wBAAzD,EAAmFhB,UAAnF;;AAEA;AACA;;AAEA,QAAI+B,SAASb,oBAAoBc,eAApB,EAAb;AACAH,YAAQC,GAAR,CAAY,qDAAZ;AACAD,YAAQC,GAAR,CAAYC,MAAZ;;AAEA,QAAIE,eAAe,IAAIC,UAAJ,CAAgBhB,oBAAoBiB,KAApB,GAA4BjB,oBAAoBkB,MAAhD,GAAyD,CAAzE,CAAnB;;AAEAlB,wBAAoBmB,sBAApB,CAA6CN,MAA7C,EAAqD,CAArD,EAAwD,CAAxD,EAA2Db,oBAAoBiB,KAA/E,EAAsFjB,oBAAoBkB,MAA1G,EAAkHH,YAAlH;;AAEA,QAAIK,aAAa,CAAExB,qBAAqBI,oBAAoBiB,KAA1C,GAAmDnB,kBAApD,IAA0E,CAA3F;;AAEA,QAAIuB,QAAQ;AACRC,WAAGP,aAAaK,aAAa,CAA1B,CADK;AAERG,WAAGR,aAAaK,aAAa,CAA1B,CAFK;AAGRI,WAAGT,aAAaK,aAAa,CAA1B,CAHK;AAIRK,WAAGV,aAAaK,aAAa,CAA1B;AAJK,KAAZ;;AAOAT,YAAQC,GAAR,CAAY,6BAAZ;AACAD,YAAQC,GAAR,CAAYS,KAAZ;;AAEA1C,cAAU+C,aAAV,CAAwBlD,MAAMmD,KAAN,EAAxB,EAAuCtD,YAAYuD,MAAnD;AACA,QAAIC,UAAUlD,UAAUmD,gBAAV,CAA2BzD,YAAY0D,KAAZ,CAAkBC,QAA7C,CAAd;;AAEArB,YAAQC,GAAR,CAAYiB,OAAZ;AACH;;AAED,SAASnC,iBAAT,CAA2BC,KAA3B,EAAkC;AAC9Bd,mBAAe,KAAf;AACH;;AAGD,SAASI,OAAT,GAAmB;;AAGfgD,0BAAsBhD,OAAtB;AACAZ,gBAAYY,OAAZ;AACAX,eAAWW,OAAX;AAGH","file":"logic.js","sourcesContent":["if (!Detector.webgl) Detector.addGetWebGLMessage();\r\n\r\n// global variables for this scripts\r\nlet OriginalImg,\r\n    SegmentImg,\r\n    myFileReader;\r\n\r\nvar mouse = new THREE.Vector2();\r\nvar raycaster = new THREE.Raycaster();\r\nvar mousePressed = false;\r\nvar clickCount = 0;\r\nvar allText;\r\n\r\n\r\n\r\ninit();\r\nanimate();\r\n\r\n\r\n\r\n\r\n// initilize the page\r\nfunction init() {\r\n\r\n\r\n    readTextFile(\"columna01-es-latin1.txt\");\r\n    initCanvasOfOriginalImg();\r\n    initCanvasOfSegmentedImg();\r\n\r\n}\r\n\r\n\r\n\r\nlet originalCanvas = document.getElementById('original');\r\noriginalCanvas.addEventListener('mousedown', onDocumentMouseDown, false);\r\noriginalCanvas.addEventListener('mouseup', onDocumentMouseUp, false);\r\n\r\n\r\nfunction onDocumentMouseDown(event) {\r\n    mousePressed = true;\r\n\r\n    clickCount++;\r\n\r\n    let realClickedCanvasX = event.offsetX;\r\n    let realClickedCanvasY = event.offsetY;\r\n\r\n    let OriginalImgRenderer = OriginalImg.renderer;\r\n    mouse.x = ( ( event.clientX - OriginalImgRenderer.domElement.offsetLeft ) / OriginalImgRenderer.domElement.clientWidth ) * 2 - 1;\r\n    mouse.y = -( ( event.clientY - OriginalImgRenderer.domElement.offsetTop ) / OriginalImgRenderer.domElement.clientHeight ) * 2 + 1\r\n\r\n\r\n    console.log('Mouse x position is: ', realClickedCanvasX, 'the click number was: ', clickCount);\r\n    console.log('Mouse x position is: ', realClickedCanvasY, 'the click number was: ', clickCount);\r\n\r\n    //console.log('Mouse x position is: ', mouse.x, 'the click number was: ', clickCount);\r\n    //console.log('Mouse Y position is: ', mouse.y);\r\n\r\n    var target = OriginalImgRenderer.getRenderTarget();\r\n    console.log('Our target which should be a WebGLRenderTarget is: ');\r\n    console.log(target);\r\n\r\n    var outputBuffer = new Uint8Array( OriginalImgRenderer.width * OriginalImgRenderer.height * 4 );\r\n\r\n    OriginalImgRenderer.readRenderTargetPixels ( target, 0, 0, OriginalImgRenderer.width, OriginalImgRenderer.height, outputBuffer );\r\n\r\n    var pixelIndex = ((realClickedCanvasX * OriginalImgRenderer.width) + realClickedCanvasY) * 4;\r\n\r\n    var color = {\r\n        r: outputBuffer[pixelIndex + 0],\r\n        g: outputBuffer[pixelIndex + 1],\r\n        b: outputBuffer[pixelIndex + 2],\r\n        a: outputBuffer[pixelIndex + 3]\r\n    };\r\n\r\n    console.log('Color of clicked pixel is: ');\r\n    console.log(color);\r\n\r\n    raycaster.setFromCamera(mouse.clone(), OriginalImg.camera);\r\n    var objects = raycaster.intersectObjects(OriginalImg.scene.children);\r\n\r\n    console.log(objects);\r\n}\r\n\r\nfunction onDocumentMouseUp(event) {\r\n    mousePressed = false\r\n}\r\n\r\n\r\nfunction animate() {\r\n\r\n\r\n    requestAnimationFrame(animate);\r\n    OriginalImg.animate();\r\n    SegmentImg.animate();\r\n\r\n\r\n}\r\n\r\n"]}